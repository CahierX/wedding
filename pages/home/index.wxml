<view class="home-summary">
  <view class="item">
    <text class="price">￥{{todayBillAmount}}</text>
    <text>今日销售额</text>
  </view>
  <view class="item">
    <text class="price"> {{todayBillCount}}</text>
    <text>今日账单数</text>
  </view>
</view>

<view class="content">
  <card wx:for="{{allBill}}" wx:key="index" title="{{item.date}}" desc="收入 {{fn.calcTotal(item.list)}}, 账单数 {{item.list.length}}">
    <list slot="content" bind:addBill="addBill" bind:deleteCallBack="deleteItem" list="{{item.list}}" />
  </card>
</view>

<view class="no-more" wx:if="{{noMore}}">
  <text>我是有底线的</text>
</view>
<t-popup visible="{{visible}}" placement="bottom" bind:visible-change="onVisibleChange">
  <record id="record" wx:if="{{isShowRecord}}" bind:closeBill="closeBill" bind:refreshBill="onPullDownRefresh" />
</t-popup>
<t-fab style="right:20rpx;bottom: 250rpx;" icon="edit-1" bind:click="addBill" text="记一笔" />
<wxs module="fn">
  module.exports = {
    calcTotal: function (arr) {
      var total = 0
      arr.forEach(function (item) {
        total += item.real_amount
      });
      return total
    }
  }
</wxs>